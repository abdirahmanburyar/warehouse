import{j as g,C as y,r as _,c as h,o as u,w as m,a as n,b as a,u as o,m as v,f as x,g as b,t as l,d as w,n as C,e as V}from"./app-lBFWFbO3.js";import{_ as S}from"./GuestLayout-B0QkDtfk.js";import{_ as k}from"./InputError-BLGuqF9p.js";import{_ as T}from"./InputLabel-H8ZK7EIA.js";import{P as B}from"./PrimaryButton-B4gQPJ4i.js";import{_ as P}from"./TextInput-BP2iDJ_P.js";const r=g([]);let N=0;const d={add(t,e={}){const s=++N,i={id:s,message:t,type:e.type||"info",position:e.position||"top-right",duration:e.duration||3e3,autoClose:e.autoClose!==void 0?e.autoClose:!0};return r.push(i),i.autoClose&&setTimeout(()=>{this.remove(s)},i.duration),s},remove(t){const e=r.findIndex(s=>s.id===t);e!==-1&&r.splice(e,1)},clear(){r.splice(0,r.length)},success(t,e={}){return this.add(t,{...e,type:"success"})},error(t,e={}){return this.add(t,{...e,type:"error"})},info(t,e={}){return this.add(t,{...e,type:"info"})},getToasts(){return r}},$={class:"bg-white p-4"},E={key:0,class:"mb-4 font-medium text-sm text-green-600"},F={class:"flex items-center justify-between mt-4"},j=["disabled"],U={__name:"TwoFactor",props:{status:String},setup(t){const e=y({code:""}),s=_(!1),i=()=>{e.post(route("two-factor.verify"),{onSuccess:()=>{d.success("Successfully verified. Redirecting...")},onError:()=>{d.error("Verification failed. Please try again.")}})},f=()=>{s.value=!0,axios.post(route("two-factor.resend")).then(()=>{d.success("A new verification code has been sent to your email.")}).catch(()=>{d.error("Failed to resend code. Please try again.")}).finally(()=>{s.value=!1})};return(A,c)=>(u(),h(S,null,{default:m(()=>[n(o(v),{title:"Two-Factor Authentication"}),a("div",$,[c[1]||(c[1]=a("div",{class:"mb-4 text-sm text-gray-600"}," Please enter the 6-digit verification code sent to your email address. ",-1)),t.status?(u(),x("div",E,l(t.status),1)):b("",!0),a("form",{onSubmit:w(i,["prevent"]),class:"bg-white p-4"},[a("div",null,[n(T,{for:"code",value:"Verification Code"}),n(P,{id:"code",type:"text",class:"mt-1 block w-full",modelValue:o(e).code,"onUpdate:modelValue":c[0]||(c[0]=p=>o(e).code=p),required:"",autofocus:"",autocomplete:"off",maxlength:"6",placeholder:"Enter 6-digit code"},null,8,["modelValue"]),n(k,{class:"mt-2",message:o(e).errors.code},null,8,["message"])]),a("div",F,[a("button",{type:"button",class:"text-sm text-gray-600 hover:text-gray-900 underline cursor-pointer",onClick:f,disabled:s.value},l(s.value?"Sending...":"Resend Code"),9,j),n(B,{class:C(["ml-4",{"opacity-25":o(e).processing}]),disabled:o(e).processing},{default:m(()=>[V(l(o(e).processing?"Verifying...":"Verify"),1)]),_:1},8,["class","disabled"])])],32)])]),_:1}))}};export{U as default};
