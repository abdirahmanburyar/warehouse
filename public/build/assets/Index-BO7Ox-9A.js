import{l as U,r as f,f as r,o as d,a,b as e,w as p,t as n,d as $,i as x,F as _,q as b,x as y,e as g,n as P,B}from"./app-lBFWFbO3.js";import{_ as F}from"./Modal-B7Ry9LA4.js";import{_ as u}from"./InputLabel-H8ZK7EIA.js";import{_ as I}from"./TextInput-BP2iDJ_P.js";import{_ as T}from"./TextArea-B11Z3-Ey.js";import{P as h}from"./PrimaryButton-B4gQPJ4i.js";import{_ as j}from"./SecondaryButton-CKTZP05A.js";const D={class:"space-y-6"},E={class:"p-6"},R={class:"text-lg font-medium text-gray-900 mb-4"},z=["value"],L={class:"flex items-center justify-end gap-4 mt-6"},G={class:"flex justify-between items-center mb-4"},H={class:"bg-white rounded-lg shadow overflow-x-auto"},J={class:"min-w-full divide-y divide-gray-200"},K={class:"bg-white divide-y divide-gray-200"},Q={class:"px-6 py-4 whitespace-nowrap"},W={class:"px-6 py-4 whitespace-nowrap"},X={class:"px-6 py-4 whitespace-nowrap"},Y={class:"px-6 py-4 whitespace-nowrap"},Z={class:"px-6 py-4"},ee={class:"text-sm text-gray-500"},te={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},se=["onClick"],oe=["onClick"],ce={__name:"Index",props:{approvals:Object,roles:Array},setup(m){const w=U(),k=m,c=f(!1),s=f({id:null,role_id:"",model:"",action:"",sequence:1,notes:""}),A=()=>{s.value.id=null,s.value.role_id="",s.value.model="",s.value.action="",s.value.sequence=1,s.value.notes="",c.value=!0},v=()=>{s.value.id=null,c.value=!1},i=f(!1),C=async()=>{console.log(s.value),i.value=!0,await B.post(route("approvals.store"),s.value).then(l=>{i.value=!1,w.success(l.data),v()}).catch(l=>{i.value=!1,w.error(l.response.data)})},S=l=>{s.value.id=l.id,s.value.role_id=l.role_id,s.value.model=l.model,s.value.action=l.action,s.value.sequence=l.sequence,s.value.notes=l.notes,c.value=!0},V=l=>{confirm("Are you sure you want to delete this approval step?")&&s.delete(route("approvals.destroy",l))},q=l=>{const t=k.roles.find(o=>o.id===l);return t?t.name:"Unknown"},M=l=>({"App\\Models\\PurchaseOrderItem":"Purchase Order Item","App\\Models\\Order":"Order","App\\Models\\Transfer":"Transfer"})[l]||l,O=l=>({confirm:"bg-blue-100 text-blue-800",verify:"bg-yellow-100 text-yellow-800",approve:"bg-green-100 text-green-800"})[l]||"bg-gray-100 text-gray-800";return(l,t)=>(d(),r("div",D,[a(F,{show:c.value,onClose:v},{default:p(()=>[e("div",E,[e("h2",R,n(s.value.id?"Edit Approval Step":"Add Approval Step"),1),e("form",{onSubmit:$(C,["prevent"]),class:"space-y-4"},[e("div",null,[a(u,{for:"role_id",value:"Role"}),x(e("select",{"onUpdate:modelValue":t[0]||(t[0]=o=>s.value.role_id=o),class:"mt-1 block w-full"},[t[5]||(t[5]=e("option",{value:""},"Select a role",-1)),(d(!0),r(_,null,b(m.roles,o=>(d(),r("option",{key:o.id,value:o.id},n(o.name),9,z))),128))],512),[[y,s.value.role_id]])]),e("div",null,[a(u,{for:"model",value:"Model Type"}),x(e("select",{"onUpdate:modelValue":t[1]||(t[1]=o=>s.value.model=o),class:"mt-1 block w-full"},t[6]||(t[6]=[e("option",{value:""},"Select a model",-1),e("option",{value:"PurchaseOrderItem"},"Purchase Order Item",-1),e("option",{value:"Order"},"Order",-1)]),512),[[y,s.value.model]])]),e("div",null,[a(u,{for:"action",value:"Action"}),x(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>s.value.action=o),class:"mt-1 block w-full"},t[7]||(t[7]=[e("option",{value:""},"Select an action",-1),e("option",{value:"confirm"},"Confirm",-1),e("option",{value:"verify"},"Verify",-1),e("option",{value:"approve"},"Approve",-1)]),512),[[y,s.value.action]])]),e("div",null,[a(u,{for:"sequence",value:"Sequence"}),a(I,{id:"sequence",type:"number",min:"1",modelValue:s.value.sequence,"onUpdate:modelValue":t[3]||(t[3]=o=>s.value.sequence=o),class:"mt-1 block w-full"},null,8,["modelValue"])]),e("div",null,[a(u,{for:"notes",value:"Notes"}),a(T,{id:"notes",modelValue:s.value.notes,"onUpdate:modelValue":t[4]||(t[4]=o=>s.value.notes=o),class:"mt-1 block w-full",rows:"3"},null,8,["modelValue"])]),e("div",L,[a(j,{onClick:v,disabled:i.value},{default:p(()=>t[8]||(t[8]=[g("Cancel")])),_:1},8,["disabled"]),a(h,{disabled:i.value},{default:p(()=>[g(n(s.value.id?i.value?"Updating...":"Update":i.value?"Creating...":"Create"),1)]),_:1},8,["disabled"])])],32)])]),_:1},8,["show"]),e("div",G,[t[10]||(t[10]=e("h2",{class:"text-lg font-medium text-gray-900"},"Approval Steps",-1)),a(h,{onClick:A},{default:p(()=>t[9]||(t[9]=[g("Add New Step")])),_:1})]),e("div",H,[e("table",J,[t[11]||(t[11]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Role"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Model"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Action"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Sequence"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Notes"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",K,[(d(!0),r(_,null,b(m.approvals.data,o=>(d(),r("tr",{key:o.id},[e("td",Q,n(q(o.role_id)),1),e("td",W,n(M(o.model)),1),e("td",X,[e("span",{class:P([O(o.action),"px-2 py-1 text-xs rounded-full"])},n(o.action),3)]),e("td",Y,n(o.sequence),1),e("td",Z,[e("span",ee,n(o.notes||"-"),1)]),e("td",te,[e("button",{onClick:N=>S(o),class:"text-indigo-600 hover:text-indigo-900 mr-3"},"Edit",8,se),e("button",{onClick:N=>V(o.id),class:"text-red-600 hover:text-red-900"},"Delete",8,oe)])]))),128))])])])]))}};export{ce as default};
