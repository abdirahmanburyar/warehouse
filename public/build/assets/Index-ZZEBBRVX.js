import{_ as G,l as J,r as b,C as K,f as a,o as d,a as l,u,m as Q,w as _,b as e,i as $,g as h,p as I,e as p,F as k,q as z,t as f,n as R,d as X,v as Y,W as B}from"./app-lBFWFbO3.js";import{A as Z}from"./AuthenticatedLayout-BAQR-N2z.js";import{_ as F}from"./Modal-B7Ry9LA4.js";import{_ as N}from"./InputLabel-H8ZK7EIA.js";import{_ as ee}from"./TextInput-BP2iDJ_P.js";import{_ as te}from"./Pagination-B1ZOkbJe.js";import{_ as C}from"./SortIcon-DegmTfiJ.js";const se={class:"mt-3"},oe={class:"max-w-full mx-auto"},re={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},ie={class:"p-6 text-gray-900"},le={class:"flex flex-col md:flex-row md:items-center md:justify-between mb-6 space-y-4 md:space-y-0"},ne={class:"w-full md:w-1/3"},ae={class:"relative"},de={key:0,class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},ue={class:"overflow-x-auto bg-white rounded-lg shadow overflow-y-auto relative"},ce={class:"border-collapse table-auto w-full whitespace-no-wrap bg-white table-striped relative"},fe={class:"text-left"},me={class:"flex items-center"},ve={class:"flex items-center"},be={class:"flex items-center"},pe={class:"flex items-center"},ge={class:"py-3 px-4 border-b border-gray-200"},xe={class:"py-3 px-4 border-b border-gray-200"},he={class:"py-3 px-4 border-b border-gray-200"},ye={class:"max-w-xs truncate"},we={class:"py-3 px-4 border-b border-gray-200"},_e={class:"py-3 px-4 border-b border-gray-200"},ke={class:"py-3 px-4 border-b border-gray-200"},Ce={class:"flex items-center space-x-2"},Ae=["onClick"],Me=["onClick"],De={key:0},Ve={class:"mt-4"},Se={class:"p-6"},$e={class:"text-lg font-medium text-gray-900"},ze={key:0,class:"mt-3"},Be=["disabled"],Ne={class:"flex items-center"},Te=["disabled"],je={class:"flex items-center justify-end pt-4 border-t border-gray-200"},He=["disabled"],Ie=["disabled"],Fe={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Ue={class:"p-6"},qe={class:"mt-6 flex justify-end"},Ee=["disabled"],Le=["disabled"],Oe={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},We={__name:"Index",props:{categories:Object,filters:Object},setup(n){const m=J(),v=n,A=b(!1),M=b(!1),y=b(null),x=b(null),r=b(!1),c=b(!1),g=b(v.filters.search||""),i=K({id:null,name:"",description:"",is_active:!0});function T(){const s={};B.get(route("categories.index"),s,{preserveState:!0,preserveScroll:!0,only:["categories","filters"]})}let j;const U=()=>{clearTimeout(j),r.value=!0,j=setTimeout(()=>{const s={};g.value&&(s.search=g.value),v.filters.sort_field&&(s.sort_field=v.filters.sort_field),v.filters.sort_direction&&(s.sort_direction=v.filters.sort_direction),B.get(route("categories.index"),s,{preserveState:!0,preserveScroll:!0,onFinish:()=>{r.value=!1}})},300)},w=s=>{r.value=!0;let t="asc";v.filters.sort_field===s&&(t=v.filters.sort_direction==="asc"?"desc":"asc");const o={sort_field:s,sort_direction:t};g.value&&(o.search=g.value),B.get(route("categories.index"),o,{preserveState:!0,preserveScroll:!0,onFinish:()=>{r.value=!1}})},H=(s=null)=>{x.value=null,c.value=!1,s?(i.id=s.id,i.name=s.name,i.description=s.description||"",i.is_active=s.is_active):(i.reset(),i.is_active=!0),A.value=!0},D=()=>{A.value=!1},q=()=>{c.value=!0,r.value=!0,x.value=null,axios.post(route("categories.store"),i.data()).then(s=>{s.data.success?(m.success(s.data.message),D(),T()):m.error(s.data.message||"An error occurred")}).catch(s=>{s.response&&s.response.data&&s.response.data.errors?(x.value=s.response.data.errors,m.error("Please correct the errors in the form")):m.error("An error occurred while saving the category")}).finally(()=>{r.value=!1,c.value=!1})},E=s=>{y.value=s,M.value=!0},V=()=>{M.value=!1,y.value=null},L=()=>{y.value&&(r.value=!0,axios.delete(route("categories.destroy",y.value.id)).then(s=>{s.data.success?(m.success(s.data.message),V(),T()):m.error(s.data.message||"An error occurred")}).catch(s=>{m.error("An error occurred while deleting the category"),console.error(s)}).finally(()=>{r.value=!1}))},O=s=>{if(!s)return"";const t=new Date(s);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(t)};return(s,t)=>(d(),a(k,null,[l(u(Q),{title:"Categories"}),l(Z,null,{header:_(()=>t[9]||(t[9]=[e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Categories",-1)])),default:_(()=>[e("div",se,[e("div",oe,[e("div",re,[e("div",ie,[e("div",le,[e("div",ne,[e("div",ae,[t[11]||(t[11]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})])],-1)),$(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>g.value=o),type:"text",placeholder:"Search by name or description...",class:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 transition duration-150",onInput:U},null,544),[[I,g.value]]),r.value?(d(),a("div",de,t[10]||(t[10]=[e("svg",{class:"animate-spin h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):h("",!0)])]),e("button",{onClick:t[1]||(t[1]=o=>H()),class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition duration-150 flex items-center justify-center shadow-sm"},t[12]||(t[12]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 01-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z","clip-rule":"evenodd"})],-1),p(" Add New ")]))]),e("div",ue,[e("table",ce,[e("thead",null,[e("tr",fe,[e("th",{class:"py-3 px-4 uppercase font-semibold text-sm border-b-2 border-gray-200 cursor-pointer",onClick:t[2]||(t[2]=o=>w("id"))},[e("div",me,[t[13]||(t[13]=p(" ID ")),l(C,{field:"id","sort-field":n.filters.sort_field,"sort-direction":n.filters.sort_direction},null,8,["sort-field","sort-direction"])])]),e("th",{class:"py-3 px-4 uppercase font-semibold text-sm border-b-2 border-gray-200 cursor-pointer",onClick:t[3]||(t[3]=o=>w("name"))},[e("div",ve,[t[14]||(t[14]=p(" Name ")),l(C,{field:"name","sort-field":n.filters.sort_field,"sort-direction":n.filters.sort_direction},null,8,["sort-field","sort-direction"])])]),t[17]||(t[17]=e("th",{class:"py-3 px-4 uppercase font-semibold text-sm border-b-2 border-gray-200"}," Description ",-1)),e("th",{class:"py-3 px-4 uppercase font-semibold text-sm border-b-2 border-gray-200 cursor-pointer",onClick:t[4]||(t[4]=o=>w("is_active"))},[e("div",be,[t[15]||(t[15]=p(" Status ")),l(C,{field:"is_active","sort-field":n.filters.sort_field,"sort-direction":n.filters.sort_direction},null,8,["sort-field","sort-direction"])])]),e("th",{class:"py-3 px-4 uppercase font-semibold text-sm border-b-2 border-gray-200 cursor-pointer",onClick:t[5]||(t[5]=o=>w("created_at"))},[e("div",pe,[t[16]||(t[16]=p(" Created At ")),l(C,{field:"created_at","sort-field":n.filters.sort_field,"sort-direction":n.filters.sort_direction},null,8,["sort-field","sort-direction"])])]),t[18]||(t[18]=e("th",{class:"py-3 px-4 uppercase font-semibold text-sm border-b-2 border-gray-200"}," Actions ",-1))])]),e("tbody",null,[(d(!0),a(k,null,z(n.categories.data,o=>(d(),a("tr",{key:o.id,class:"hover:bg-gray-100 transition-colors duration-150"},[e("td",ge,f(o.id),1),e("td",xe,f(o.name),1),e("td",he,[e("div",ye,f(o.description||"No description"),1)]),e("td",we,[e("span",{class:R(["px-2 py-1 rounded-full text-xs font-medium",o.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},f(o.is_active?"Active":"Inactive"),3)]),e("td",_e,f(O(o.created_at)),1),e("td",ke,[e("div",Ce,[e("button",{onClick:S=>H(o),class:"text-blue-600 hover:text-blue-900 transition",title:"Edit"},t[19]||(t[19]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,Ae),e("button",{onClick:S=>E(o),class:"text-red-600 hover:text-red-900 transition",title:"Delete"},t[20]||(t[20]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,Me)])])]))),128)),n.categories.data.length===0?(d(),a("tr",De,t[21]||(t[21]=[e("td",{colspan:"6",class:"py-6 text-center text-gray-500"},"No categories found",-1)]))):h("",!0)])])]),e("div",Ve,[l(te,{links:n.categories.meta.links},null,8,["links"])])])])])]),l(F,{show:A.value,onClose:D},{default:_(()=>[e("div",Se,[e("h2",$e,f(u(i).id?"Edit Category":"Create New Category"),1),x.value?(d(),a("div",ze,[(d(!0),a(k,null,z(x.value,(o,S)=>(d(),a("div",{key:S,class:"text-sm text-red-600"},[(d(!0),a(k,null,z(o,(W,P)=>(d(),a("div",{key:P},f(W),1))),128))]))),128))])):h("",!0),e("form",{onSubmit:X(q,["prevent"]),class:"space-y-6 mt-4"},[e("div",null,[l(N,{for:"name",value:"Name"}),l(ee,{id:"name",type:"text",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50 transition",modelValue:u(i).name,"onUpdate:modelValue":t[6]||(t[6]=o=>u(i).name=o),required:"",disabled:c.value||r.value,placeholder:"Enter category name"},null,8,["modelValue","disabled"])]),e("div",null,[l(N,{for:"description",value:"Description"}),$(e("textarea",{id:"description",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50 transition","onUpdate:modelValue":t[7]||(t[7]=o=>u(i).description=o),disabled:c.value||r.value,rows:"3",placeholder:"Enter category description"},null,8,Be),[[I,u(i).description]])]),e("div",Ne,[$(e("input",{id:"is_active",type:"checkbox",class:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50","onUpdate:modelValue":t[8]||(t[8]=o=>u(i).is_active=o),disabled:c.value||r.value},null,8,Te),[[Y,u(i).is_active]]),l(N,{for:"is_active",value:"Active",class:"ml-2"})]),e("div",je,[e("button",{type:"button",class:"px-4 py-2 bg-white border border-gray-300 rounded-md font-semibold text-xs text-gray-700 uppercase tracking-widest shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-25 transition ease-in-out duration-150 mr-2",onClick:D,disabled:c.value||r.value}," Cancel ",8,He),e("button",{type:"submit",class:"px-4 py-2 bg-blue-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-blue-700 focus:bg-blue-700 active:bg-blue-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition ease-in-out duration-150 flex items-center",disabled:c.value||r.value},[r.value?(d(),a("svg",Fe,t[22]||(t[22]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):h("",!0),p(" "+f(u(i).id?"Update":"Create"),1)],8,Ie)])],32)])]),_:1},8,["show"]),l(F,{show:M.value,onClose:V},{default:_(()=>[e("div",Ue,[t[25]||(t[25]=e("h2",{class:"text-lg font-medium text-gray-900"}," Delete Category ",-1)),t[26]||(t[26]=e("p",{class:"mt-3 text-sm text-gray-600"}," Are you sure you want to delete this category? This action cannot be undone. ",-1)),e("div",qe,[e("button",{type:"button",class:"px-4 py-2 bg-white border border-gray-300 rounded-md font-semibold text-xs text-gray-700 uppercase tracking-widest shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-25 transition ease-in-out duration-150 mr-2",onClick:V,disabled:r.value}," Cancel ",8,Ee),e("button",{type:"button",class:"px-4 py-2 bg-red-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-red-700 focus:bg-red-700 active:bg-red-900 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition ease-in-out duration-150 flex items-center",onClick:L,disabled:r.value},[r.value?(d(),a("svg",Oe,t[23]||(t[23]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):h("",!0),t[24]||(t[24]=p(" Delete "))],8,Le)])])]),_:1},8,["show"])]),_:1})],64))}},Ye=G(We,[["__scopeId","data-v-a26a9f11"]]);export{Ye as default};
