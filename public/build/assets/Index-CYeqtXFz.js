import{r as x,h as j,s as q,W as O,f as i,o as a,a as b,u as K,m as X,w as D,b as e,g as p,t as r,e as m,n as f,i as S,p as Z,F as V,q as P,x as ee,v as I,C as te}from"./app-lBFWFbO3.js";import{A as se}from"./AuthenticatedLayout-BAQR-N2z.js";import{_ as oe}from"./Pagination-B1ZOkbJe.js";import{_ as re}from"./Modal-B7Ry9LA4.js";import{P as le}from"./PrimaryButton-B4gQPJ4i.js";import{_ as ie}from"./SecondaryButton-CKTZP05A.js";import{_ as ae}from"./InputLabel-H8ZK7EIA.js";import{_ as ne}from"./TextArea-B11Z3-Ey.js";import{d as de}from"./debounce-DS9xtVAQ.js";import{h as W}from"./moment-C5S46NFB.js";const ue={class:"bg-white overflow-hidden sm:rounded-lg"},pe={class:"p-6 text-gray-900"},ce={key:0,class:"mb-4 p-4 bg-green-100 text-green-700 rounded"},ve={key:1,class:"mb-4 p-4 bg-red-100 text-red-700 rounded"},xe={class:"flex flex-col lg:flex-row lg:gap-6"},me={class:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-4 lg:hidden"},be={class:"flex items-start justify-between"},fe={class:"text-xl font-bold mb-2"},ge={class:"text-xs opacity-90"},we={class:"flex items-start justify-between"},he={class:"text-xl font-bold mb-2"},ye={class:"text-xs opacity-90"},ke={class:"flex items-start justify-between"},_e={class:"text-xl font-bold mb-2"},Ce={class:"text-xs opacity-90"},Me={class:"flex items-start justify-between"},$e={class:"text-xl font-bold mb-2"},je={class:"text-xs opacity-90"},De={class:"lg:w-10/12 lg:order-1"},Se={class:"border-b border-gray-200 mb-4"},Ee={class:"-mb-px flex w-full"},Ve={class:"mb-4 flex flex-col md:flex-row justify-between items-start md:items-center gap-4"},Be={class:"w-full md:w-auto"},Ne={class:"flex items-center space-x-4"},Ae=["value"],Le={key:0,class:"inline-block"},Fe=["disabled"],Te={class:"overflow-x-auto"},Ye={class:"min-w-full border-2 border-black divide-y divide-black"},Ue={class:"bg-gray-50 border-b-2 border-black"},qe={key:0,scope:"col",class:"px-6 py-3 text-left text-xs font-bold text-gray-900 uppercase tracking-wider border-r-2 border-black"},Oe={key:0,class:"ml-1"},Pe={key:0,class:"ml-1"},Ie={key:0,class:"ml-1"},We={key:0,class:"ml-1"},ze={class:"bg-white divide-y divide-black"},Qe={key:0},Re=["colspan"],Ge={class:"flex flex-col items-center justify-center"},He={class:"text-lg font-medium"},Je={key:0,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 border-r-2 border-black"},Ke=["value"],Xe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 border-r-2 border-black"},Ze={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 border-r-2 border-black"},et={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 border-r-2 border-black"},tt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 border-r-2 border-black"},st={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 border-r-2 border-black"},ot={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},rt=["onClick"],lt={class:"mt-4 flex justify-end"},it={class:"hidden lg:grid lg:grid-cols-1 gap-3 lg:w-2/12 lg:order-2 lg:sticky lg:top-0 lg:self-start"},at={class:"flex items-center justify-between"},nt={class:"text-white"},dt={class:"text-2xl font-bold"},ut={class:"text-xs mt-1 opacity-80"},pt={class:"flex items-center justify-between"},ct={class:"text-white"},vt={class:"text-2xl font-bold"},xt={class:"text-xs mt-1 opacity-80"},mt={class:"flex items-center justify-between"},bt={class:"text-white"},ft={class:"text-2xl font-bold"},gt={class:"text-xs mt-1 opacity-80"},wt={class:"flex items-center justify-between"},ht={class:"text-white"},yt={class:"text-2xl font-bold"},kt={class:"text-xs mt-1 opacity-80"},_t={class:"p-6"},Ct={class:"mb-4 text-gray-600"},Mt={class:"mb-4"},$t={class:"mt-6 flex justify-end space-x-3"},Tt={__name:"Index",props:{inventories:Object,warehouses:Array,activeTab:{type:String,default:"all"},filters:Object,counts:Object},setup(n){var F,T,Y;const k=n,l=x(k.activeTab),g=x(((F=k.filters)==null?void 0:F.search)||""),c=x(((T=k.filters)==null?void 0:T.sort_field)||"expiry_date"),u=x(((Y=k.filters)==null?void 0:Y.sort_direction)||"asc"),w=x(""),v=x([]),_=x(!1),h=x(!1),C=x(""),y=x(!1),B=j(()=>{const s=new Date;return s.setFullYear(s.getFullYear()+1),M(s)}),N=j(()=>{const s=new Date;return s.setMonth(s.getMonth()+6),M(s)}),A=j(()=>{const s=new Date;return s.setFullYear(s.getFullYear()-1),M(s)}),L=j(()=>{const s=new Date;return s.setMonth(s.getMonth()+2),M(s)});function M(s){return s?W(s).format("LL"):"N/A"}q(g,de(()=>{E()},300)),q(w,()=>{E()});function d(s){l.value=s;const t={};g.value&&(t.search=g.value),c.value&&(t.sort_field=c.value),u.value&&(t.sort_direction=u.value),w.value&&(t.warehouse_id=w.value),O.visit(route("expired.index",{tab:s,...t}),{preserveState:!0,preserveScroll:!0,replace:!0,only:["inventories","filters","counts"]})}function E(){const s={};g.value&&(s.search=g.value),c.value&&(s.sort_field=c.value),u.value&&(s.sort_direction=u.value),w.value&&(s.warehouse_id=w.value),O.visit(route("expired.index",{tab:l.value,...s}),{preserveState:!0,preserveScroll:!0,replace:!0,only:["inventories","filters","counts"]})}function $(s){c.value===s?u.value=u.value==="asc"?"desc":"asc":(c.value=s,u.value="asc"),E()}function z(){_.value?v.value=k.inventories.data.map(s=>s.id):v.value=[]}function Q(s=[]){s.length>0&&(v.value=s),h.value=!0}function R(){y.value=!0,te({inventory_ids:v.value,notes:C.value}).post(route("expired.dispose"),{preserveScroll:!0,onSuccess:()=>{h.value=!1,v.value=[],_.value=!1,C.value="",y.value=!1},onError:()=>{y.value=!1}})}const G=s=>s?W(s).format("LL"):"N/A";function H(s){switch(s.status){case"disposed":return"Disposed";case"expired":return"Expired";case"near":return"Near Expiry";default:return"Active"}}function J(s){switch(s.status){case"disposed":return"bg-green-100 text-green-800 border border-green-400 font-semibold";case"expired":return"bg-red-100 text-red-800 border border-red-400 font-semibold";case"near":return"bg-yellow-100 text-yellow-800 border border-yellow-400 font-semibold";default:return"bg-blue-100 text-blue-800 border border-blue-400 font-semibold"}}return(s,t)=>(a(),i(V,null,[b(K(X),{title:"Expired"}),b(se,{title:"Manage Expiring Items",description:"saving Stock, Securing Quality",img:"/assets/images/expires.png"},{default:D(()=>[e("div",ue,[e("div",pe,[s.$page.props.flash&&s.$page.props.flash.success?(a(),i("div",ce,r(s.$page.props.flash.success),1)):p("",!0),s.$page.props.flash&&s.$page.props.flash.error?(a(),i("div",ve,r(s.$page.props.flash.error),1)):p("",!0),e("div",xe,[e("div",me,[e("div",{class:"bg-orange-400 p-4 rounded-xl hover:shadow-md transition-all duration-200 cursor-pointer text-white",onClick:t[0]||(t[0]=o=>d("all"))},[e("div",be,[e("div",null,[t[24]||(t[24]=e("div",{class:"font-medium mb-1"},[m("Expiring within next"),e("br"),m("1 Year")],-1)),e("div",fe,r(n.counts.all)+" items",1),e("div",ge,r(B.value),1)]),t[25]||(t[25]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-12 w-12 text-white opacity-80",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})],-1))])]),e("div",{class:"bg-pink-500 p-4 rounded-xl hover:shadow-md transition-all duration-200 cursor-pointer text-white",onClick:t[1]||(t[1]=o=>d("near"))},[e("div",we,[e("div",null,[t[26]||(t[26]=e("div",{class:"font-medium mb-1"},[m("Expiring within next"),e("br"),m("6 months")],-1)),e("div",he,r(n.counts.near)+" items",1),e("div",ye,r(N.value),1)]),t[27]||(t[27]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-12 w-12 text-white opacity-80",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})],-1))])]),e("div",{class:"bg-gray-500 p-4 rounded-xl hover:shadow-md transition-all duration-200 cursor-pointer text-white",onClick:t[2]||(t[2]=o=>d("expired"))},[e("div",ke,[e("div",null,[t[28]||(t[28]=e("div",{class:"font-medium mb-1"},"Expired items",-1)),e("div",_e,r(n.counts.expired)+" items",1),e("div",Ce,r(A.value),1)]),t[29]||(t[29]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-12 w-12 text-white opacity-80",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})],-1))])]),e("div",{class:"bg-emerald-400 p-4 rounded-xl hover:shadow-md transition-all duration-200 cursor-pointer text-white",onClick:t[3]||(t[3]=o=>d("disposed"))},[e("div",Me,[e("div",null,[t[30]||(t[30]=e("div",{class:"font-medium mb-1"},"Disposed items",-1)),e("div",$e,r(n.counts.disposed)+" items",1),e("div",je,r(L.value),1)]),t[31]||(t[31]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-12 w-12 text-white opacity-80",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})],-1))])])]),e("div",De,[e("div",Se,[e("nav",Ee,[e("button",{onClick:t[4]||(t[4]=o=>d("all")),class:f(["flex-1 text-center whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm",[l.value==="all"?"border-blue-600 text-blue-700 border-b-4":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"]])}," All Expiration ",2),e("button",{onClick:t[5]||(t[5]=o=>d("near")),class:f(["flex-1 text-center whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm",[l.value==="near"?"border-yellow-600 text-yellow-700 border-b-4":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"]])}," Near Expiry ",2),e("button",{onClick:t[6]||(t[6]=o=>d("expired")),class:f(["flex-1 text-center whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm",[l.value==="expired"?"border-red-600 text-red-700 border-b-4":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"]])}," Expired ",2),e("button",{onClick:t[7]||(t[7]=o=>d("disposed")),class:f(["flex-1 text-center whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm",[l.value==="disposed"?"border-emerald-600 text-emerald-700 border-b-4":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"]])}," Disposed ",2)])]),e("div",Ve,[e("div",Be,[S(e("input",{type:"text","onUpdate:modelValue":t[8]||(t[8]=o=>g.value=o),placeholder:"Search products, batch numbers...",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm w-full"},null,512),[[Z,g.value]])]),e("div",Ne,[S(e("select",{"onUpdate:modelValue":t[9]||(t[9]=o=>w.value=o),class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm"},[t[32]||(t[32]=e("option",{value:""},"All Warehouses",-1)),(a(!0),i(V,null,P(n.warehouses,o=>(a(),i("option",{key:o.id,value:o.id},r(o.name),9,Ae))),128))],512),[[ee,w.value]]),l.value==="expired"||l.value==="near"?(a(),i("div",Le,[e("button",{onClick:t[10]||(t[10]=o=>h.value=!0),disabled:v.value.length===0,class:f([v.value.length===0?"bg-gray-400 cursor-not-allowed":"bg-red-600 hover:bg-red-700","text-white py-2 px-4 rounded"])}," Mark as Disposed ",10,Fe)])):p("",!0)])]),e("div",Te,[e("table",Ye,[e("thead",Ue,[e("tr",null,[l.value==="expired"||l.value==="near"?(a(),i("th",qe,[S(e("input",{type:"checkbox","onUpdate:modelValue":t[11]||(t[11]=o=>_.value=o),onChange:z},null,544),[[I,_.value]])])):p("",!0),e("th",{onClick:t[12]||(t[12]=o=>$("product_name")),scope:"col",class:"px-6 py-3 text-left text-xs font-bold text-gray-900 uppercase tracking-wider cursor-pointer border-r-2 border-black"},[t[33]||(t[33]=m(" Product ")),c.value==="product_name"?(a(),i("span",Oe,r(u.value==="asc"?"↑":"↓"),1)):p("",!0)]),e("th",{onClick:t[13]||(t[13]=o=>$("batch_number")),scope:"col",class:"px-6 py-3 text-left text-xs font-bold text-gray-900 uppercase tracking-wider cursor-pointer border-r-2 border-black"},[t[34]||(t[34]=m(" Batch Number ")),c.value==="batch_number"?(a(),i("span",Pe,r(u.value==="asc"?"↑":"↓"),1)):p("",!0)]),e("th",{onClick:t[14]||(t[14]=o=>$("expiry_date")),scope:"col",class:"px-6 py-3 text-left text-xs font-bold text-gray-900 uppercase tracking-wider cursor-pointer border-r-2 border-black"},[t[35]||(t[35]=m(" Expiry Date ")),c.value==="expiry_date"?(a(),i("span",Ie,r(u.value==="asc"?"↑":"↓"),1)):p("",!0)]),e("th",{onClick:t[15]||(t[15]=o=>$("quantity")),scope:"col",class:"px-6 py-3 text-left text-xs font-bold text-gray-900 uppercase tracking-wider cursor-pointer border-r-2 border-black"},[t[36]||(t[36]=m(" Quantity ")),c.value==="quantity"?(a(),i("span",We,r(u.value==="asc"?"↑":"↓"),1)):p("",!0)]),t[37]||(t[37]=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-bold text-gray-900 uppercase tracking-wider border-r-2 border-black"}," Status ",-1)),t[38]||(t[38]=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-bold text-gray-900 uppercase tracking-wider"}," Actions ",-1))])]),e("tbody",ze,[n.inventories.data.length===0?(a(),i("tr",Qe,[e("td",{colspan:l.value==="expired"||l.value==="near"?7:6,class:"px-6 py-10 text-center text-gray-500 bg-gray-50"},[e("div",Ge,[t[39]||(t[39]=e("svg",{class:"w-12 h-12 text-gray-400 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("span",He,"No "+r(l.value)+" inventory items found",1)])],8,Re)])):p("",!0),(a(!0),i(V,null,P(n.inventories.data,o=>(a(),i("tr",{key:o.id,class:f({"bg-red-50":o.is_expired,"bg-yellow-50":o.is_near_expiry})},[l.value==="expired"||l.value==="near"?(a(),i("td",Je,[S(e("input",{type:"checkbox","onUpdate:modelValue":t[16]||(t[16]=U=>v.value=U),value:o.id},null,8,Ke),[[I,v.value]])])):p("",!0),e("td",Xe,r(o.product_name),1),e("td",Ze,r(o.batch_number),1),e("td",et,r(G(o.expiry_date)),1),e("td",tt,r(o.quantity),1),e("td",st,[e("span",{class:f(J(o))},r(H(o)),3)]),e("td",ot,[(l.value==="expired"||l.value==="near")&&!o.is_disposed?(a(),i("button",{key:0,onClick:U=>Q([o.id]),class:"text-red-600 hover:text-red-900"}," Mark as Disposed ",8,rt)):p("",!0)])],2))),128))])])]),e("div",lt,[b(oe,{links:n.inventories.meta.links},null,8,["links"])])]),e("div",it,[e("div",{class:"bg-gradient-to-r from-orange-400 to-orange-300 p-4 rounded-lg hover:shadow-md transition-all duration-200 cursor-pointer",onClick:t[17]||(t[17]=o=>d("all"))},[e("div",at,[e("div",nt,[t[40]||(t[40]=e("div",{class:"text-sm font-medium"},"Expiring within next 1 year",-1)),e("div",dt,r(n.counts.all),1),e("div",ut,r(B.value),1)]),t[41]||(t[41]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8 text-white opacity-80",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})],-1))])]),e("div",{class:"bg-gradient-to-r from-pink-500 to-pink-400 p-4 rounded-lg hover:shadow-md transition-all duration-200 cursor-pointer",onClick:t[18]||(t[18]=o=>d("near"))},[e("div",pt,[e("div",ct,[t[42]||(t[42]=e("div",{class:"text-sm font-medium"},"Expiring within 6 months",-1)),e("div",vt,r(n.counts.near),1),e("div",xt,r(N.value),1)]),t[43]||(t[43]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8 text-white opacity-80",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})],-1))])]),e("div",{class:"bg-gradient-to-r from-gray-600 to-gray-500 p-4 rounded-lg hover:shadow-md transition-all duration-200 cursor-pointer",onClick:t[19]||(t[19]=o=>d("expired"))},[e("div",mt,[e("div",bt,[t[44]||(t[44]=e("div",{class:"text-sm font-medium"},"Expired items",-1)),e("div",ft,r(n.counts.expired),1),e("div",gt,r(A.value),1)]),t[45]||(t[45]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8 text-white opacity-80",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})],-1))])]),e("div",{class:"bg-gradient-to-r from-emerald-400 to-emerald-300 p-4 rounded-lg hover:shadow-md transition-all duration-200 cursor-pointer",onClick:t[20]||(t[20]=o=>d("disposed"))},[e("div",wt,[e("div",ht,[t[46]||(t[46]=e("div",{class:"text-sm font-medium"},"Disposed items",-1)),e("div",yt,r(n.counts.disposed),1),e("div",kt,r(L.value),1)]),t[47]||(t[47]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8 text-white opacity-80",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})],-1))])])])]),b(re,{show:h.value,onClose:t[23]||(t[23]=o=>h.value=!1)},{default:D(()=>[e("div",_t,[t[49]||(t[49]=e("h2",{class:"text-lg font-medium text-gray-900 mb-4"}," Mark Items as Disposed ",-1)),e("p",Ct," You are about to mark "+r(v.value.length)+" item(s) as disposed. This action cannot be undone. ",1),e("div",Mt,[b(ae,{for:"disposal_notes",value:"Notes (Optional)"}),b(ne,{id:"disposal_notes",modelValue:C.value,"onUpdate:modelValue":t[21]||(t[21]=o=>C.value=o),class:"mt-1 block w-full",placeholder:"Reason for disposal"},null,8,["modelValue"])]),e("div",$t,[b(ie,{onClick:t[22]||(t[22]=o=>h.value=!1)},{default:D(()=>t[48]||(t[48]=[m(" Cancel ")])),_:1}),b(le,{onClick:R,class:f({"opacity-25":y.value}),disabled:y.value},{default:D(()=>[m(r(y.value?"Processing...":"Confirm Disposal"),1)]),_:1},8,["class","disabled"])])])]),_:1},8,["show"])])])]),_:1})],64))}};export{Tt as default};
